{"remainingRequest":"/Users/houxudong/frontedProjects/vueblog-vue/node_modules/babel-loader/lib/index.js!/Users/houxudong/frontedProjects/vueblog-vue/src/axios.js","dependencies":[{"path":"/Users/houxudong/frontedProjects/vueblog-vue/src/axios.js","mtime":1592111309885},{"path":"/Users/houxudong/frontedProjects/vueblog-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/houxudong/frontedProjects/vueblog-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBFbGVtZW50IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgcm91dGVyIGZyb20gJy4vcm91dGVyJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gImh0dHA6Ly8xMjcuMC4wLjE6NzAwMS9hcGkiOyAvLyDliY3nva7mi6bmiKoKCmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgcmV0dXJuIGNvbmZpZzsKfSk7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSBlbHNlIGlmIChyZXMuY29kZSA9PSA0MDEpIHsKICAgIGNvbnNvbGUubG9nKCd0b2tlbiDlpLHmlYgnKTsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgcGF0aDogJy9sb2dpbicsCiAgICAgIHF1ZXJ5OiB7CiAgICAgICAgcmVkaXJlY3Q6IHJvdXRlci5jdXJyZW50Um91dGUuZnVsbFBhdGgKICAgICAgfQogICAgfSk7CiAgfSBlbHNlIHsKICAgIEVsZW1lbnQuTWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSwgewogICAgICBkdXJhdGlvbjogMyAqIDEwMDAKICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlLmRhdGEubXNnKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgIGVycm9yLm1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZS5kYXRhLm1zZzsKICB9CgogIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgc3RvcmUuY29tbWl0KCJSRU1PVkVfSU5GTyIpOwogICAgcm91dGVyLnB1c2goIi9sb2dpbiIpOwogIH0KCiAgRWxlbWVudC5NZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UsIHsKICAgIGR1cmF0aW9uOiAzICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOw=="},{"version":3,"sources":["/Users/houxudong/frontedProjects/vueblog-vue/src/axios.js"],"names":["axios","Element","router","store","defaults","baseURL","interceptors","request","use","config","response","res","data","code","console","log","push","path","query","redirect","currentRoute","fullPath","Message","error","message","duration","Promise","reject","msg","status","commit"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAGAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAyB,2BAAzB,C,CAEA;;AACAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACvC,SAAOA,MAAP;AACD,CAFD;AAIAT,KAAK,CAACM,YAAN,CAAmBI,QAAnB,CAA4BF,GAA5B,CAAgC,UAAAE,QAAQ,EAAI;AAC1C,MAAIC,GAAG,GAAGD,QAAQ,CAACE,IAAnB;;AAEA,MAAID,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AACpB,WAAOH,QAAP;AACD,GAFD,MAEO,IAAIC,GAAG,CAACE,IAAJ,IAAY,GAAhB,EAAqB;AAC1BC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAb,IAAAA,MAAM,CAACc,IAAP,CAAY;AACVC,MAAAA,IAAI,EAAE,QADI;AAEVC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,EAAEjB,MAAM,CAACkB,YAAP,CAAoBC;AAAhC;AAFG,KAAZ;AAID,GANM,MAMA;AACLpB,IAAAA,OAAO,CAACqB,OAAR,CAAgBC,KAAhB,CAAsBZ,GAAG,CAACa,OAA1B,EAAmC;AAAEC,MAAAA,QAAQ,EAAE,IAAI;AAAhB,KAAnC;AACA,WAAOC,OAAO,CAACC,MAAR,CAAejB,QAAQ,CAACE,IAAT,CAAcgB,GAA7B,CAAP;AACD;AACF,CAfD,EAgBE,UAAAL,KAAK,EAAI;AACPT,EAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAZ;;AACA,MAAIA,KAAK,CAACb,QAAN,CAAeE,IAAnB,EAAyB;AACvBW,IAAAA,KAAK,CAACC,OAAN,GAAgBD,KAAK,CAACb,QAAN,CAAeE,IAAf,CAAoBgB,GAApC;AACD;;AAED,MAAIL,KAAK,CAACb,QAAN,CAAemB,MAAf,KAA0B,GAA9B,EAAmC;AACjC1B,IAAAA,KAAK,CAAC2B,MAAN,CAAa,aAAb;AACA5B,IAAAA,MAAM,CAACc,IAAP,CAAY,QAAZ;AACD;;AAEDf,EAAAA,OAAO,CAACqB,OAAR,CAAgBC,KAAhB,CAAsBA,KAAK,CAACC,OAA5B,EAAqC;AAAEC,IAAAA,QAAQ,EAAE,IAAI;AAAhB,GAArC;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CA7BH","sourcesContent":["import axios from 'axios'\nimport Element from 'element-ui'\nimport router from './router'\nimport store from './store'\n\n\naxios.defaults.baseURL = \"http://127.0.0.1:7001/api\"\n\n// 前置拦截\naxios.interceptors.request.use(config => {\n  return config\n})\n\naxios.interceptors.response.use(response => {\n  let res = response.data;\n\n  if (res.code === 200) {\n    return response\n  } else if (res.code == 401) {\n    console.log('token 失效')\n    router.push({\n      path: '/login',\n      query: { redirect: router.currentRoute.fullPath }\n    })\n  } else {\n    Element.Message.error(res.message, { duration: 3 * 1000 })\n    return Promise.reject(response.data.msg)\n  }\n},\n  error => {\n    console.log(error)\n    if (error.response.data) {\n      error.message = error.response.data.msg\n    }\n\n    if (error.response.status === 401) {\n      store.commit(\"REMOVE_INFO\")\n      router.push(\"/login\")\n    }\n\n    Element.Message.error(error.message, { duration: 3 * 1000 })\n    return Promise.reject(error)\n  }\n)"]}]}